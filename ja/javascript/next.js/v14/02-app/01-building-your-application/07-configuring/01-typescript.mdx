---
filePath: source/next.js/docs/02-app/01-building-your-application/07-configuring/01-typescript.mdx
title: TypeScript
description: Next.js provides a TypeScript-first development experience for building your React application.
org_title: TypeScript
org_path: /docs/app/building-your-application/configuring/typescript
is_empty: false
---

{/* The content of this doc is shared between the app and pages router. You can use the `<PagesOnly>Content</PagesOnly>` component to add content that is specific to the Pages Router. Any shared content should not be wrapped in a component. */}

Next.jsã¯ã€ã‚ãªãŸã®Reactã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®TypeScriptã‚’æœ€åˆã«ä½¿ç”¨ã™ã‚‹developmentä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚

ãã‚Œã¯ã€å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€é©åˆ‡ãªsettingsã‚’è¨­å®šã™ã‚‹ãŸã‚ã®çµ„ã¿è¾¼ã¿ã®TypeScriptã‚µãƒãƒ¼ãƒˆãŒä»˜å±ã—ã¦ã„ã¾ã™ã€‚

<AppOnly>

ã‚ãªãŸã®ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ç”¨ã®[TypeScript Plugin](#typescript-plugin)ã‚‚å«ã‚ã¦ã„ã¾ã™ã€‚

> **ğŸ¥ è¦–è´ã™ã‚‹:** TypeScript plugin ã«ã¤ã„ã¦å­¦ã¶ â†’ [YouTube (3åˆ†é–“)](https://www.youtube.com/watch?v=pqMqn9fKEf8)

</AppOnly>

## New Projects

`create-next-app`ã¯ä»Šã€TypeScriptã‚’defaultã§é…å¸ƒã—ã¦ã„ã¾ã™ã€‚

```bash:Terminal
npx create-next-app@latest
```

## Existing Projects

ãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚’ `.ts` / `.tsx` ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã« TypeScript ã‚’è¿½åŠ ã—ã¾ã™ã€‚`next dev` ãŠã‚ˆã³ `next build` ã‚’å®Ÿè¡Œã—ã¦ã€å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€æ¨å¥¨ã® config options ã‚’æŒã¤ `tsconfig.json` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚

ã™ã§ã«`jsconfig.json`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãŠæŒã¡ã®å ´åˆã¯ã€å¤ã„`jsconfig.json`ã‹ã‚‰`paths` compiler ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ–°ã—ã„`tsconfig.json`ãƒ•ã‚¡ã‚¤ãƒ«ã«è²¼ã‚Šä»˜ã‘ã€å¤ã„`jsconfig.json`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’deleteã—ã¦ãã ã•ã„ã€‚

<AppOnly>

## TypeScript Plugin

Next.jsã¯ã€ã‚«ã‚¹ã‚¿ãƒ ã®TypeScript pluginã¨typeãƒã‚§ãƒƒã‚«ãƒ¼ã‚’å«ã¿ã€VScodeã‚„ä»–ã®codeã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒé«˜åº¦ãªtypeãƒã‚§ãƒƒã‚¯ã¨è‡ªå‹•è£œå®Œã®ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚

VS Codeã§pluginã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æ–¹æ³•ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™:

1. ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã‚’é–‹ã(`Ctrl/âŒ˜` + `Shift` + `P`)
"2. ã€ŒTypeScript: TypeScriptversionã‚’é¸æŠã€ã®æ¤œç´¢"
3. "Use Workspace Version"ã‚’é¸æŠã™ã‚‹

<Image
  alt="TypeScript Command Palette"
  srcLight="/docs/light/typescript-command-palette.png"
  srcDark="/docs/dark/typescript-command-palette.png"
  width="1600"
  height="637"
/>

ã•ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã™ã‚‹ã¨ã€ã‚«ã‚¹ã‚¿ãƒ ã®pluginãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚`next build`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚«ã‚¹ã‚¿ãƒ ã®typeãƒã‚§ãƒƒã‚«ãƒ¼ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

### Plugin ã®ç‰¹å¾´

TypeScript pluginã¯ä»¥ä¸‹ã®ç‚¹ã§ãŠæ‰‹ä¼ã„ã§ãã¾ã™ï¼š

- ç„¡åŠ¹ãªå€¤ãŒ[segment config options](/ja/javascript/next.js/v14/02-app/02-api-reference/02-file-conventions/route-segment-config)ã«æ¸¡ã•ã‚ŒãŸå ´åˆã®è­¦å‘Šã€‚
- åˆ©ç”¨å¯èƒ½ãªoptionsã‚’è¡¨ç¤ºã—ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«åŸºã¥ã„ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã¾ã™ã€‚
- `use client`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãŒæ­£ã—ãä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
- `useState`ã®ã‚ˆã†ãªclienthookãŒClient Componentsã§ã®ã¿ä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

> **Good to know**: å°†æ¥çš„ã«ã¯ã•ã‚‰ã«å¤šãã®æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã‚‹äºˆå®šã§ã™ã€‚

</AppOnly>

## Minimum TypeScript Version

`v4.5.2`ä»¥ä¸Šã®TypeScriptã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚ã“ã®Versionã§ã¯ã€[importã®åå‰ã«ã¤ã„ã¦ã®typeä¿®é£¾å­](https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#type-on-import-names)ã‚„[ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Š](https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#real-path-sync-native)ãªã©ã¨ã„ã£ãŸsyntaxãƒ•ã‚£ãƒ¼ãƒãƒ£ãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

<AppOnly>

## Statically Typed Links

 Next.js ã¯ã€`next/link`ã‚’ä½¿ç”¨ã™ã‚‹éš›ã®ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ã‚„ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼ã‚’é˜²ããŸã‚ã«ã€ãƒªãƒ³ã‚¯ã‚’é™çš„ã« type ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒšãƒ¼ã‚¸é–“ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã® type å®‰å…¨æ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚

ã“ã®æ©Ÿèƒ½ã«å‚åŠ ã™ã‚‹ãŸã‚ã«ã¯ã€`experimental.typedRoutes`ã‚’æœ‰åŠ¹ã«ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§TypeScriptã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```js:next.config.js
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    typedRoutes: true,
  },
}

module.exports = nextConfig
```

Next.jsã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®å…¨ã¦ã®æ—¢å­˜ã®routesã«é–¢ã™ã‚‹æƒ…å ±ã‚’å«ã‚€`.next/types`å†…ã®linkå®šç¾©ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ãã‚Œã‚’TypeScriptãŒä½¿ç”¨ã—ã¦ã€ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼å†…ã®ç„¡åŠ¹ãªãƒªãƒ³ã‚¯ã«ã¤ã„ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æä¾›ã—ã¾ã™ã€‚

ç¾åœ¨ã€å®Ÿé¨“çš„ãªå¯¾å¿œã¯ã€dynamicã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’å«ã‚€ä»»æ„ã®stringãƒªãƒ†ãƒ©ãƒ«ã‚’å«ã¿ã¾ã™ã€‚ãƒªãƒ†ãƒ©ãƒ«ã§ãªã„æ–‡å­—åˆ—ã®å ´åˆã€ç¾åœ¨ã¯æ‰‹å‹•ã§`href`ã‚’`as Route`ã¨ã—ã¦ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```tsx
import type { Route } from 'next';
import Link from 'next/link'

// No TypeScript errors if href is a valid route
<Link href="/about" />
<Link href="/blog/nextjs" />
<Link href={`/blog/${slug}`} />
<Link href={('/blog' + slug) as Route} />

// TypeScript errors if href is not a valid route
<Link href="/aboot" />
```

`href`ã‚’ã‚«ã‚¹ã‚¿ãƒ ã®componentã§ãƒ©ãƒƒãƒ—ã™ã‚‹`next/link`ã«å—ã‘å…¥ã‚Œã‚‹ãŸã‚ã«ã¯ã€ä¸€èˆ¬çš„ãªã‚‚ã®ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

```tsx
import type { Route } from 'next'
import Link from 'next/link'

function Card<T extends string>({ href }: { href: Route<T> | URL }) {
  return (
    <Link href={href}>
      <div>My Card</div>
    </Link>
  )
}
```

> **ãã‚Œã¯ã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã—ã¾ã™ã‹ï¼Ÿ**
>
> `next dev`ã¾ãŸã¯`next build`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Next.jsã¯`.next`ã®ä¸­ã«éš ã•ã‚ŒãŸ`.d.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®å…¨ã¦ã®æ—¢å­˜ã®routes(`Link`ã®`href`ã®typeã§ã‚ã‚‹å…¨ã¦ã®æœ‰åŠ¹ãªroutes)ã«é–¢ã™ã‚‹æƒ…å ±ã‚’å«ã¿ã¾ã™ã€‚ã“ã®`.d.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã¯`tsconfig.json`ã«å«ã¾ã‚Œã€TypeScript compilerã¯ãã®`.d.ts`ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€ç„¡åŠ¹ãªãƒªãƒ³ã‚¯ã«ã¤ã„ã¦ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æä¾›ã—ã¾ã™ã€‚

## End-to-End Type Safety

 Next.js App Router ã¯ã€** type ã®å®‰å…¨æ€§ã‚’å¼·åŒ–**ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã¯æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ãŒå«ã¾ã‚Œã¾ã™ï¼š

1. **ãƒ•ã‚§ãƒƒãƒé–¢æ•°ã¨ãƒšãƒ¼ã‚¸é–“ã§ã®ãƒ‡ãƒ¼ã‚¿ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãªã—**ï¼š Componentsã€layoutã€ãƒšãƒ¼ã‚¸ä¸Šã§ç›´æ¥`fetch`ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã¯ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º( string ã¸ã®å¤‰æ›)ã•ã‚ŒãŸã‚Šã€ React ã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã« client å´ã«æ¸¡ã•ã‚Œã‚‹å¿…è¦ã¯_ã‚ã‚Šã¾ã›ã‚“_ã€‚ä»£ã‚ã‚Šã«ã€`app`ã¯ default ã§ Server Components ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€ç‰¹åˆ¥ãªæ‰‹é †ãªã—ã§`Date`ã€`Map`ã€`Set`ãªã©ã®valuesã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚ä»¥å‰ã¯ã€ Next .jså›ºæœ‰ã® server ã‚’ä½¿ã£ã¦æ‰‹å‹•ã§ server ã¨ client ã®å¢ƒç•Œã‚’ type ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚
2. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®åŠ¹ç‡åŒ–**ï¼š `_app` ã®ä»£ã‚ã‚Šã« root ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ãƒšãƒ¼ã‚¸é–“ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’è¦–è¦šåŒ–ã™ã‚‹ã“ã¨ãŒå®¹æ˜“ã«ãªã‚Šã¾ã—ãŸã€‚ä»¥å‰ã¯ã€`pages`ã¨`_app`ã®é–“ã§ãƒ‡ãƒ¼ã‚¿ãŒæµã‚Œã‚‹éš›ã«ã€ type ãŒå›°é›£ã§æ··ä¹±ã‚’æ‹›ããƒã‚°ãŒç”Ÿã˜ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã—ãŸã€‚ãã®å•é¡Œã¯ã‚‚ã¯ã‚„å­˜åœ¨ã›ãšã€ App Router ã§ã¯[colocated data fetching](/ja/javascript/next.js/v14/02-app/01-building-your-application/02-data-fetching/01-fetching-caching-and-revalidating)ãŒå¯èƒ½ã§ã™ã€‚

[Next.jsã«ãŠã‘ã‚‹ãƒ‡ãƒ¼ã‚¿ã®å–å¾—](/ja/javascript/next.js/v14/02-app/01-building-your-application/02-data-fetching/01-fetching-caching-and-revalidating)ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®é¸æŠã«ã¤ã„ã¦æŒ‡ç¤ºã™ã‚‹ã“ã¨ãªãã€ã§ãã‚‹ã ã‘ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®typeå®‰å…¨æ€§ã‚’æä¾›ã—ã¾ã™ã€‚

æˆ‘ã€…ã¯é€šå¸¸ã®TypeScriptã§æœŸå¾…ã™ã‚‹ã‚ˆã†ã«ã€responseãƒ‡ãƒ¼ã‚¿ã‚’typeã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ï¼š

```tsx:app/page.tsx
async function getData() {
  const res = await fetch('https://api.example.com/...')
  // The return value is *not* serialized
  // You can return Date, Map, Set, etc.
  return res.json()
}

export default async function Page() {
  const name = await getData()

  return '...'
}
```

_å®Œå…¨ãª_ ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®typeå®‰å…¨æ€§ã«ã¤ã„ã¦ã¯ã€ã‚ãªãŸã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¾ãŸã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãŒTypeScriptã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚‚å¿…è¦ã§ã™ã€‚ã“ã‚Œã¯ã€[ORM](https://en.wikipedia.org/wiki/Object%E2%80%93relational_mapping)ã®ä½¿ç”¨ã‚„ã€å‹å®‰å…¨ãªqueryãƒ“ãƒ«ãƒ€ã®ä½¿ç”¨ã‚’é€šã˜ã¦å®Ÿç¾ã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

## Async Server Component TypeScript Error

`async`ã®Server Componentã‚’TypeScriptã§ä½¿ç”¨ã™ã‚‹ã«ã¯ã€TypeScript `5.1.3` ä»¥ä¸ŠãŠã‚ˆã³ `@types/react` `18.2.8` ä»¥ä¸Šã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

ã‚‚ã—å¤ã„versionã®TypeScriptã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€`'Promise<Element>' is not a valid JSX element`ã¨ã„ã†type errorãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚æœ€æ–°ã®versionã®TypeScriptã¨`@types/react`ã«æ›´æ–°ã™ã‚‹ã“ã¨ã§ã€ã“ã®å•é¡Œã¯è§£æ±ºã™ã‚‹ã¯ãšã§ã™ã€‚

## Passing Data Between Server & Client Components

Serverã¨Client Componentã‚’propsã‚’é€šã˜ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹éš›ã€ãã®ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«æ–‡å­—åˆ—åŒ–(stringã«å¤‰æ›)ã•ã‚Œã¾ã™ã€‚ãŸã ã—ã€ç‰¹åˆ¥ãªtypeã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ãã‚Œã¯ã€Componenté–“ã§ä»–ã®propsã‚’é€šéã•ã›ã‚‹ã®ã¨åŒã˜ã‚ˆã†ã«å‹ä»˜ã‘ã•ã‚Œã¾ã™ã€‚

ã•ã‚‰ã«ã€æœªãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ãƒ‡ãƒ¼ã‚¿ãŒserverã¨clientã®é–“ã‚’æ¸¡ã‚‰ãªã„ãŸã‚ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã‚‹codeãŒå°‘ãªããªã‚Šã¾ã™(ãã‚Œã¯serverä¸Šã«æ®‹ã‚Šã¾ã™)ã€‚ã“ã‚Œã¯ç¾åœ¨ã€Server Componentsã®ã‚µãƒãƒ¼ãƒˆã«ã‚ˆã‚Šå¯èƒ½ã¨ãªã‚Šã¾ã—ãŸã€‚

</AppOnly>

<PagesOnly>

## Static Generation and Server-side Rendering

[`getStaticProps`](/ja/javascript/next.js/v14/03-pages/02-api-reference/02-functions/get-static-props)ã€[`getStaticPaths`](/ja/javascript/next.js/v14/03-pages/02-api-reference/02-functions/get-static-paths)ã€ãŠã‚ˆã³[`getServerSideProps`](/ja/javascript/next.js/v14/03-pages/02-api-reference/02-functions/get-server-side-props)ã«ã¤ã„ã¦ã¯ã€ãã‚Œãã‚Œ`GetStaticProps`ã€`GetStaticPaths`ã€`GetServerSideProps`ã®typeã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```tsx:pages/blog/[slug].tsx
import { GetStaticProps, GetStaticPaths, GetServerSideProps } from 'next'

export const getStaticProps = (async (context) => {
  // ...
}) satisfies GetStaticProps

export const getStaticPaths = (async () => {
  // ...
}) satisfies GetStaticPaths

export const getServerSideProps = (async (context) => {
  // ...
}) satisfies GetServerSideProps
```

> **çŸ¥ã£ã¦ãŠãã¹ãã“ã¨:** `satisfies`ã¯ã€ TypeScript ã®[4.9](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-9.html)ã«è¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚æœ€æ–°ã® version ã® TypeScript ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

## API Routes

ä»¥ä¸‹ã¯ã€API routesç”¨ã®çµ„ã¿è¾¼ã¿typeã®ä½¿ç”¨æ–¹æ³•ã®ä¸€ä¾‹ã§ã™ï¼š

```ts
import type { NextApiRequest, NextApiResponse } from 'next'

export default function handler(req: NextApiRequest, res: NextApiResponse) {
  res.status(200).json({ name: 'John Doe' })
}
```

ã‚ãªãŸã¯ã¾ãŸã€responseãƒ‡ãƒ¼ã‚¿ã‚’typeã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š

```ts
import type { NextApiRequest, NextApiResponse } from 'next'

type Data = {
  name: string
}

export default function handler(
  req: NextApiRequest,
  res: NextApiResponse<Data>
) {
  res.status(200).json({ name: 'John Doe' })
}
```

## Custom `App`

ã‚ãªãŸãŒ[ã‚«ã‚¹ã‚¿ãƒ  `App`](/ja/javascript/next.js/v14/03-pages/01-building-your-application/01-routing/05-custom-app)ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€çµ„ã¿è¾¼ã¿ã®type `AppProps`ã‚’ä½¿ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«åã‚’`./pages/_app.tsx`ã«å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®ã‚ˆã†ã«ï¼š

```ts
import type { AppProps } from 'next/app'

export default function MyApp({ Component, pageProps }: AppProps) {
  return <Component {...pageProps} />
}
```

</PagesOnly>

## Path aliases and baseUrl

Next.jsã¯è‡ªå‹•çš„ã«`tsconfig.json`ã®`"paths"`ã¨`"baseUrl"`ã®optionsã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚"

<AppOnly>

ã“ã®æ©Ÿèƒ½ã«ã¤ã„ã¦ã¯[ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« Path ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³](/ja/javascript/next.js/v14/02-app/01-building-your-application/07-configuring/04-absolute-imports-and-module-aliases)ã§è©³ã—ãå­¦ã¹ã¾ã™ã€‚

</AppOnly>

<PagesOnly>

ã“ã®æ©Ÿèƒ½ã«ã¤ã„ã¦ã¯ã€[ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«Pathã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³](/ja/javascript/next.js/v14/03-pages/01-building-your-application/06-configuring/04-absolute-imports-and-module-aliases)ã§è©³ã—ãå­¦ã¹ã¾ã™ã€‚

</PagesOnly>

## Type checking next.config.js

`next.config.js`ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Babelã¾ãŸã¯TypeScriptã«ã‚ˆã£ã¦è§£æã•ã‚Œãªã„ãŸã‚ã€JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã—ã‹ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«JSDocã‚’ä½¿ç”¨ã—ã¦IDEã§ã„ãã¤ã‹ã®typeãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

```js
// @ts-check

/**
 * @type {import('next').NextConfig}
 **/
const nextConfig = {
  /* config options here */
}

module.exports = nextConfig
```

## Incremental type checking

`v10.2.1`ä»¥é™ã€ Next.jsã¯ã€`tsconfig.json`ã§æœ‰åŠ¹ã«ã—ãŸå ´åˆã«[å¢—åˆ†ã® type ãƒã‚§ãƒƒã‚¯](https://www.typescriptlang.org/tsconfig#incremental)ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å¤§è¦æ¨¡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹typeãƒã‚§ãƒƒã‚¯ã®é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## Ignoring TypeScript Errors

ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«TypeScripterrorãŒå­˜åœ¨ã™ã‚‹å ´åˆã€Next.jsã¯ã‚ãªãŸã®**production build** (`next build`)ã«å¤±æ•—ã—ã¾ã™ã€‚

ã‚ãªãŸã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«errorãŒã‚ã‚‹å ´åˆã§ã‚‚ã€Next.jsã«ã‚ˆã‚‹å±é™ºãªproduction codeã®ç”Ÿæˆã‚’å¸Œæœ›ã™ã‚‹å ´åˆã€çµ„ã¿è¾¼ã¿ã®typeãƒã‚§ãƒƒã‚¯ã‚¹ãƒ†ãƒƒãƒ—ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹å ´åˆã€typeãƒã‚§ãƒƒã‚¯ã‚’buildãƒ—ãƒ­ã‚»ã‚¹ã‚ã‚‹ã„ã¯deployãƒ—ãƒ­ã‚»ã‚¹ã®ä¸€éƒ¨ã¨ã—ã¦å®Ÿè¡Œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãã†ã§ãªã„å ´åˆã€ã“ã‚Œã¯éå¸¸ã«å±é™ºã§ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

`next.config.js`ã‚’é–‹ãã€`typescript`ã®configã§`ignoreBuildErrors`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚

```js:next.config.js
module.exports = {
  typescript: {
    // !! WARN !!
    // Dangerously allow production builds to successfully complete even if
    // your project has type errors.
    // !! WARN !!
    ignoreBuildErrors: true,
  },
}
```

## Custom Type Declarations

ã‚«ã‚¹ã‚¿ãƒ å‹ã‚’å®£è¨€ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã€`next-env.d.ts`ã‚’ä¿®æ­£ã—ãŸããªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã—ã‹ã—ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯è‡ªå‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ãŸã‚ã€ã‚ãªãŸãŒè¡Œã£ãŸå¤‰æ›´ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚ä»£ã‚ã‚Šã«ã€æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã¹ãã§ã™ã€ãã‚Œã‚’`new-types.d.ts`ã¨å‘¼ã³ã¾ã—ã‚‡ã†ã€ãã—ã¦ãã‚Œã‚’ã‚ãªãŸã®`tsconfig.json`ã§å‚ç…§ã—ã¦ãã ã•ã„ã€‚

```json:tsconfig.json
{
  "compilerOptions": {
    "skipLibCheck": true
    //...truncated...
  },
  "include": [
    "new-types.d.ts",
    "next-env.d.ts",
    ".next/types/**/*.ts",
    "**/*.ts",
    "**/*.tsx"
  ],
  "exclude": ["node_modules"]
}
```

## Version Changes

| Version | Changes |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| `v13.2.0` | é™çš„å‹ä»˜ã‘ãƒªãƒ³ã‚¯ãŒãƒ™ãƒ¼ã‚¿ç‰ˆã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚ |
| `v12.0.0` | [SWC](/ja/javascript/next.js/v14/04-architecture/nextjs-compiler)ã¯ã€ã‚ˆã‚Šé€Ÿã„buildã®ãŸã‚ã«ã€ä»Šå¾Œã¯ default ã§ TypeScript ã¨TSXã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¾ã™ã€‚|
| `v10.2.1` | ã‚ãªãŸã® `tsconfig.json` ã§æœ‰åŠ¹ã«ã—ãŸã¨ãã«ã€[ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ« type ãƒã‚§ãƒƒã‚¯](https://www.typescriptlang.org/tsconfig#incremental) ã®ã‚µãƒãƒ¼ãƒˆãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚|
